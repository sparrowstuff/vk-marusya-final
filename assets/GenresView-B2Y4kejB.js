import{d as f,c as p,e as m,f as _,t as h,g as v,h as o,_ as y,a as j,r as w,o as $,F as k,m as B,l as I}from"./index-MygFxHEu.js";const C=["src","alt"],G={class:"genre-card__name"},W=f({__name:"GenreCard",props:{card:{}},setup(c){const t=v(),e=c,n=p(()=>e.card.name_ru||e.card.name),s=r=>{const g="/vk-marusya-final/";if(r.startsWith("http")||r.startsWith("//"))return r;const d=r.startsWith("/")?r.slice(1):r,u=g.endsWith("/")?g.slice(0,-1):g;return u?`${u}/${d}`:`/${d}`},i=p(()=>{if(!e.card.image)return console.warn(`Нет изображения для жанра: ${e.card.name}`),s("/images/genres/default.jpg");if(Array.isArray(e.card.image)){const r=e.card.image[0];return typeof r=="string"&&r.trim()?s(r):(console.warn(`Массив изображений пуст для жанра: ${e.card.name}`),s("/images/genres/default.jpg"))}return typeof e.card.image=="string"&&e.card.image.trim()?s(e.card.image):(console.warn(`Некорректный формат изображения для жанра: ${e.card.name}`,e.card.image),"")}),l=()=>{const r=e.card.slug||e.card.name;t.push(`/genres/filtered?genre=${encodeURIComponent(r)}`)};return(r,g)=>(o(),m("article",{class:"genre-card",onClick:l},[_("img",{class:"genre-card__img",src:i.value,alt:n.value,width:"290",height:"220"},null,8,C),_("h4",G,h(n.value),1)]))}}),b=y(W,[["__scopeId","data-v-b511f852"]]),a=c=>{const t="/vk-marusya-final/",e=c.startsWith("/")?c.slice(1):c;return`${t.endsWith("/")?t.slice(0,-1):t}/${e}`},x=c=>{const t={action:"Боевик",comedy:"Комедия",drama:"Драма",horror:"Ужасы",fantasy:"Фэнтези",scifi:"Научная фантастика",romance:"Мелодрама",thriller:"Триллер",mystery:"Детектив",animation:"Анимация",adventure:"Приключения",crime:"Криминал",documentary:"Документальный",family:"Семейный",history:"Исторический",music:"Музыкальный",war:"Военный",western:"Вестерн","tv-movie":"Телевизионный","stand-up":"Стендап"},e={action:a("images/genres/action.jpg"),comedy:a("images/genres/comedy.jpg"),drama:a("images/genres/drama.webp"),horror:a("images/genres/horror.png"),fantasy:a("images/genres/fantasy.jpg"),scifi:a("images/genres/sci-fi.jpg"),romance:a("images/genres/romance.jpg"),thriller:a("images/genres/thriller.jpg"),mystery:a("images/genres/detective.jpg"),animation:a("images/genres/animation.webp"),adventure:a("images/genres/adventure.jpg"),crime:a("images/genres/crime.jpg"),documentary:a("images/genres/documentary.jpg"),family:a("images/genres/family.jpg"),history:a("images/genres/history.jpg"),music:a("images/genres/musical.jpg"),war:a("images/genres/war.jpg"),western:a("images/genres/western.jpg"),"tv-movie":a("images/genres/tv-show.jpg"),"stand-up":a("images/genres/stand-up.jpg")},n=s=>e[s]||"";return c.map((s,i)=>({id:i+1,name:s,name_ru:t[s]||s,image:n(s),slug:s}))},F={key:0,class:"genres-menu"},P={key:1,class:"loader"},N=f({__name:"GenresView",setup(c){const t=j(),e=w([]);return $(async()=>{try{const n=await t.loadGenres();e.value=x(n)}catch(n){console.error("Failed to fetch genres",n)}}),(n,s)=>e.value.length!==0?(o(),m("div",F,[(o(!0),m(k,null,B(e.value,(i,l)=>(o(),I(b,{key:l,card:i},null,8,["card"]))),128))])):(o(),m("span",P))}}),V=y(N,[["__scopeId","data-v-1c55422c"]]);export{V as default};
