import{d as y,u as x,r as v,s as M,c as h,o as C,v as V,j as B,e as o,p as l,f as s,t as a,x as m,F as H,m as L,g as Z,l as I,h as t,_ as S}from"./index-0zx33gPN.js";import{u as E}from"./basketStore-Bvm0eSAX.js";import{T as F}from"./Top10Movie-Bca2Tn0s.js";const z={key:0,class:"profile__authorize-first"},N={key:1,class:"profile"},T={class:"profile__btn-block"},W={class:"profile__fav-text"},P={class:"profile__settings-text"},R={key:0,class:"profile__settings-menu"},j={class:"profile__user-settings"},A={class:"profile__user-description"},D={class:"profile__circle"},O={class:"profile__inner-section"},U={key:0,class:"profile__user-name"},q={class:"profile__user-description"},G={class:"profile__inner-section"},J={key:0,class:"profile__user-email"},K={key:1,class:"profile__fav-films"},Q={key:0,class:"profile__no-films"},X={key:1,class:"profile__catalog"},Y=y({__name:"ProfileView",setup($){const i=x(),n=E(),w=Z(),r=v(!1),_=v(!1),{user:g}=M(i),p=h(()=>i.user?.name||""),k=h(()=>i.user?.email||""),u=()=>{r.value=!r.value},b=async()=>{await i.logout(),w.replace("/")};C(async()=>{i.user?await n.fetchFavorites():console.log("Пользователь не авторизован")}),V(g,async d=>{d?await n.fetchFavorites():n.productsInBasket=[]});const c=()=>{_.value=window.innerWidth>768};return C(()=>{c(),window.addEventListener("resize",c)}),B(()=>{window.removeEventListener("resize",c)}),(d,e)=>l(i).user?(t(),o("article",N,[e[5]||(e[5]=s("h3",{class:"profile__title"},"Мой аккаунт",-1)),s("div",T,[s("button",{class:"profile__favorites btn btn--auth",type:"button",onClick:u},[e[0]||(e[0]=s("svg",{class:"profile__fav-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M16.5 3C19.5376 3 22 5.5 22 9C22 16 14.5 20 12 21.5C9.5 20 2 16 2 9C2 5.5 4.5 3 7.5 3C9.35997 3 11 4 12 5C13 4 14.64 3 16.5 3ZM12.9339 18.6038C13.8155 18.0485 14.61 17.4955 15.3549 16.9029C18.3337 14.533 20 11.9435 20 9C20 6.64076 18.463 5 16.5 5C15.4241 5 14.2593 5.56911 13.4142 6.41421L12 7.82843L10.5858 6.41421C9.74068 5.56911 8.5759 5 7.5 5C5.55906 5 4 6.6565 4 9C4 11.9435 5.66627 14.533 8.64514 16.9029C9.39 17.4955 10.1845 18.0485 11.0661 18.6038C11.3646 18.7919 11.6611 18.9729 12 19.1752C12.3389 18.9729 12.6354 18.7919 12.9339 18.6038Z",fill:"white"})],-1)),s("span",W,a(_.value?"Избранные фильмы":"Избранное"),1)]),s("button",{class:"profile__settings btn btn--auth",type:"button",onClick:u},[e[1]||(e[1]=s("svg",{class:"profile__settings-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M4 22C4 17.5817 7.58172 14 12 14C16.4183 14 20 17.5817 20 22H18C18 18.6863 15.3137 16 12 16C8.68629 16 6 18.6863 6 22H4ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM12 11C14.21 11 16 9.21 16 7C16 4.79 14.21 3 12 3C9.79 3 8 4.79 8 7C8 9.21 9.79 11 12 11Z",fill:"white"})],-1)),s("span",P,a(_.value?"Настройка аккаунта":"Настройки"),1)])]),r.value?(t(),o("div",K,[l(n).productsInBasket.length===0?(t(),o("span",Q,"Фильмы добавленные в избранное отобразятся здесь")):(t(),o("div",X,[(t(!0),o(H,null,L(l(n).productsInBasket,(f,ss)=>(t(),I(F,{class:"profile__movie-card",key:f.id,film:f},null,8,["film"]))),128))]))])):(t(),o("div",R,[s("div",j,[s("div",A,[s("span",D,a(p.value[0]),1),s("div",O,[e[2]||(e[2]=s("span",{class:"profile__name"},"Имя Фамилия",-1)),l(i).user?(t(),o("span",U,a(p.value),1)):m("",!0)])]),s("div",q,[e[4]||(e[4]=s("span",{class:"profile__circle"},[s("svg",{class:"profile__user-mail-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M21 3C21.5523 3 22 3.44772 22 4V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918C2.44405 21 2 20.5551 2 20.0066V19H20V7.3L12 14.5L2 5.5V4C2 3.44772 2.44772 3 3 3H21ZM8 15V17H0V15H8ZM5 10V12H0V10H5ZM19.5659 5H4.43414L12 11.8093L19.5659 5Z",fill:"white"})])],-1)),s("div",G,[e[3]||(e[3]=s("span",{class:"profile__email"},"Электронная почта",-1)),l(i).user?(t(),o("span",J,a(k.value),1)):m("",!0)])])]),s("button",{class:"profile__logout-btn btn",onClick:b},"Выйти из аккаунта")]))])):(t(),o("p",z," Для просмотра этой страницы требуется авторизация "))}}),is=S(Y,[["__scopeId","data-v-71932257"]]);export{is as default};
