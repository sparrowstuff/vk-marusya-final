import{z as c,r as n,A as s}from"./index-MygFxHEu.js";const p=c("basket",()=>{const t=n([]),r=n(!1),o=async()=>{r.value=!0;try{const e=await s.get("/favorites");if(Array.isArray(e)){const a=e[0];a&&typeof a=="object"&&"id"in a&&(t.value=e)}else t.value=[]}catch(e){console.error("Failed to fetch",e)}finally{r.value=!1}};return{productsInBasket:t,isLoading:r,fetchFavorites:o,addToBasket:async e=>{try{const a=new URLSearchParams;a.append("id",e.id.toString()),await s.post("/favorites",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),t.value.some(i=>i.id===e.id)||t.value.push(e),await o()}catch(a){console.error("Ошибка добавления в избранное",a)}},removeFromBasket:async e=>{try{await s.delete(`/favorites/${e}`),t.value=t.value.filter(a=>a.id!==e)}catch(a){console.error("Ошибка удаления из избранного",a)}},isInBasket:e=>t.value.some(a=>a.id===e)}});export{p as u};
