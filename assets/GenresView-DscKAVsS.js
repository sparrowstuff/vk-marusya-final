import{d as u,c as d,e as g,f as l,t as _,g as f,h as o,_ as p,a as y,r as h,o as v,F as j,m as w,l as k}from"./index-C6prHhVu.js";const $=["src","alt"],I={class:"genre-card__name"},W=u({__name:"GenreCard",props:{card:{}},setup(i){const t=f(),e=i,a=d(()=>e.card.name_ru||e.card.name),n=d(()=>{if(!e.card.image)return console.warn(`Нет изображения для жанра: ${e.card.name}`),"/images/genres/default.jpg";if(Array.isArray(e.card.image)){const s=e.card.image[0];return typeof s=="string"&&s.trim()?c(s):(console.warn(`Массив изображений пуст для жанра: ${e.card.name}`),"/images/genres/default.jpg")}return typeof e.card.image=="string"&&e.card.image.trim()?c(e.card.image):(console.warn(`Некорректный формат изображения для жанра: ${e.card.name}`,e.card.image),"")}),c=s=>s.startsWith("/")?s:s.startsWith("./")||s.startsWith("../")?s.replace(/^\.+\//,"/"):!s.startsWith("http")&&!s.startsWith("/")?"/"+s:s,m=()=>{const s=e.card.slug||e.card.name;t.push(`/genres/filtered?genre=${encodeURIComponent(s)}`)};return(s,F)=>(o(),g("article",{class:"genre-card",onClick:m},[l("img",{class:"genre-card__img",src:n.value,alt:a.value,width:"290",height:"220"},null,8,$),l("h4",I,_(a.value),1)]))}}),B=p(W,[["__scopeId","data-v-95d8774a"]]),r=i=>{const t="/vk-marusya-final/",e=i.startsWith("/")?i.slice(1):i;return`${t.endsWith("/")?t.slice(0,-1):t}/${e}`},C=i=>{const t={action:"Боевик",comedy:"Комедия",drama:"Драма",horror:"Ужасы",fantasy:"Фэнтези",scifi:"Научная фантастика",romance:"Мелодрама",thriller:"Триллер",mystery:"Детектив",animation:"Анимация",adventure:"Приключения",crime:"Криминал",documentary:"Документальный",family:"Семейный",history:"Исторический",music:"Музыкальный",war:"Военный",western:"Вестерн","tv-movie":"Телевизионный","stand-up":"Стендап"},e={action:r("images/genres/action.jpg"),comedy:r("images/genres/сomedy.jpg"),drama:r("images/genres/drama.webp"),horror:r("images/genres/horror.png"),fantasy:r("images/genres/fantasy.jpg"),scifi:r("images/genres/sci-fi.jpg"),romance:r("images/genres/romance.jpg"),thriller:r("images/genres/thriller.jpg"),mystery:r("images/genres/detective.jpg"),animation:r("images/genres/animation.webp"),adventure:r("images/genres/adventure.jpg"),crime:r("images/genres/crime.jpg"),documentary:r("images/genres/documentary.jpg"),family:r("images/genres/family.jpg"),history:r("images/genres/history.jpg"),music:r("images/genres/musical.jpg"),war:r("images/genres/war.jpg"),western:r("images/genres/western.jpg"),"tv-movie":r("images/genres/tv-show.jpg"),"stand-up":r("images/genres/stand-up.jpg")},a=n=>e[n]||"";return i.map((n,c)=>({id:c+1,name:n,name_ru:t[n]||n,image:a(n),slug:n}))},G={key:0,class:"genres-menu"},x={key:1,class:"loader"},b=u({__name:"GenresView",setup(i){const t=y(),e=h([]);return v(async()=>{try{const a=await t.loadGenres();e.value=C(a)}catch(a){console.error("Failed to fetch genres",a)}}),(a,n)=>e.value.length!==0?(o(),g("div",G,[(o(!0),g(j,null,w(e.value,(c,m)=>(o(),k(B,{key:m,card:c},null,8,["card"]))),128))])):(o(),g("span",x))}}),P=p(b,[["__scopeId","data-v-1c55422c"]]);export{P as default};
